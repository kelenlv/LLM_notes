# ğŸŒŸDay 4: XTuner å¤§æ¨¡å‹å•å¡ä½æˆæœ¬å¾®è°ƒå®è·µ

# 1. ğŸŒŸFinetuneç®€ä»‹ï¼šé’ˆå¯¹LLMæ„å»ºä¸‹æ¸¸åº”ç”¨

![Untitled](../figs/d4/Untitled.png)

1. **å¢é‡é¢„è®­ç»ƒå¾®è°ƒ**
    1. æ‰©å¤§çŸ¥è¯†é¢
    2. system&input ç•™ç©º
        
        ![Untitled](../figs/d4/Untitled%201.png)
        
    3. LoRA & QLoRA
        1. LoRAæ¨¡å‹ï¼šAdapter
            
            ![Untitled](../figs/d4/Untitled%202.png)
            
            ![Untitled](../figs/d4/Untitled%203.png)
            
- 2.  **æŒ‡ä»¤è·Ÿéšå¾®è°ƒ**
    1. è§„èŒƒç­”é¢˜æ ¼å¼/æŒ‡ä»¤
        
        ![Untitled](../figs/d4/Untitled%204.png)
        
    2. å…·ä½“å®æ–½ï¼ˆå¾®è°ƒé˜¶æ®µï¼‰
        1. **å¯¹è¯æ¨¡æ¿çš„è§’è‰²æŒ‡å®š**ï¼ˆç”±å¾®è°ƒæ¡†æ¶å®æ–½ï¼‰
            
            ![Untitled](../figs/d4/Untitled%205.png)
            
            ![Untitled](../figs/d4/Untitled%206.png)
            
        2. å¾®è°ƒåŸç†
            
            ![Untitled](../figs/d4/Untitled%207.png)
            

# 2. XTunerç®€ä»‹

![Untitled](../figs/d4/Untitled%208.png)

# 3. XTuneråŠŸèƒ½ï¼š8GBæ˜¾å­˜ç©è½¬LLM

![Untitled](../figs/d4/Untitled%209.png)

1. Flash Attention
2. DeepSpeed ZeRO

# 4. ğŸŒŸåŠ¨æ‰‹å®æˆ˜ç¯èŠ‚

1. **å®‰è£…**
    1. ç¯å¢ƒ+å¾®è°ƒæ¡†æ¶
2. **å‡†å¤‡é…ç½®æ–‡ä»¶**
    1. æ¨¡å‹å+ä½¿ç”¨ç®—æ³•+æ•°æ®é›†+è·‘å‡ æ¬¡
3. **æ¨¡å‹ä¸‹è½½**
4. **æ•°æ®é›†ä¸‹è½½**
    1. **å°†æ•°æ®è½¬ä¸º XTuner çš„æ•°æ®æ ¼å¼ï¼ˆ.xlsxâ†’ .jsonLï¼‰**
    2. **åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†**
5. **ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„æœ¬åœ°è·¯å¾„**
6. **å¼€å§‹å¾®è°ƒ**
7. **å°†å¾—åˆ°çš„ PTH æ¨¡å‹è½¬æ¢ä¸º HuggingFace æ¨¡å‹ï¼Œå³ï¼šç”Ÿæˆ Adapter æ–‡ä»¶å¤¹ï¼ˆLoRA æ¨¡å‹æ–‡ä»¶ = Adapterï¼‰**
8. **éƒ¨ç½²ä¸æµ‹è¯•**

Referenceï¼š

[æ‰‹å†Œ](https://github.com/InternLM/tutorial/blob/main/xtuner/README.md)

[è§†é¢‘](https://www.bilibili.com/video/BV1yK4y1B75J)
